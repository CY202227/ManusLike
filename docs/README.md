# 数字员工 (Manus) 项目文档

## 📖 项目简介

数字员工 (Manus) 是一个基于大语言模型的智能任务自动化系统，能够理解用户的自然语言需求，自动规划执行方案，并调用各种工具完成复杂任务。

### 🎯 核心能力

- **智能任务分析**: 使用大语言模型分析用户需求，评估任务明确度
- **自动执行规划**: 根据任务需求自动生成多步骤执行计划  
- **工具统一调用**: 通过MCP协议统一管理和调用各种外部工具
- **文件自动管理**: 自动管理任务过程中产生的文件和结果
- **实时状态反馈**: 提供任务执行过程的实时状态更新
- **多界面支持**: 支持终端和Web两种交互界面

## 📚 文档导航

### 📋 快速开始
- [项目概述与架构](01_项目概述与架构.md) - 了解整体架构和核心组件
- [部署和使用指南](04_部署和使用指南.md) - 快速部署和使用系统

### 🔧 开发文档  
- [核心模块详解](02_核心模块详解.md) - 深入了解各核心组件
- [API接口文档](03_API接口文档.md) - 完整的API接口说明
- [开发规范和优化指南](05_开发规范和优化指南.md) - 开发规范和优化建议

### 🏗️ 架构图

```
┌─────────────────────────────────────────────────────────────┐
│                      用户交互层                               │
├─────────────────────┬───────────────────────────────────────┤
│   终端聊天界面        │            Web界面                    │
│  (terminal_chat.py) │        (web/frontend/)              │
└─────────────────────┴───────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                      核心业务层                               │
├─────────────────────┬───────────────────┬───────────────────┤
│    任务规划器        │     任务执行器      │    文件管理器       │
│  (TaskPlanner)     │  (TaskExecutor)   │  (FileManager)    │
└─────────────────────┴───────────────────┴───────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                      工具管理层                               │
├─────────────────────────────────────────────────────────────┤
│                 工具管理器 (ToolManager)                      │
│              统一管理和调用所有外部工具                         │
└─────────────────────────────────────────────────────────────┘
                              │
┌─────────────────────────────────────────────────────────────┐
│                      通信协议层                               │
├─────────────────────────────────────────────────────────────┤
│                  MCP客户端 (MultiMCPClient)                  │
│                基于MCP协议与外部工具通信                        │
└─────────────────────────────────────────────────────────────┘
```

## 🚀 快速开始

### 1. 环境要求

- Python 3.8+
- 4GB+ RAM
- 10GB+ 可用磁盘空间

### 2. 安装步骤

```bash
# 克隆项目
git clone <repository-url>
cd 05.数字员工_manus

# 创建虚拟环境
python -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate   # Windows

# 安装依赖
pip install -r requirements.txt
```

### 3. 配置说明

创建必要的配置文件：

```python
# config/llm_config.py
LLM_CONFIG = {
    "api_key": "your-openai-api-key",
    "base_url": "https://api.openai.com/v1",
    "model_name": "gpt-4"
}
```

### 4. 启动系统

```bash
# 启动主程序
python main.py

# 选择启动模式：
# 1. 终端聊天模式 - 命令行交互
# 2. Web界面模式 - 浏览器界面
# 3. 系统测试模式 - 运行测试
```

## 💡 使用示例

### 终端使用示例

```bash
👤 您: 生成一个Python贪吃蛇游戏
🤖 数字员工: 好的，我来为您生成一个Python贪吃蛇游戏。

🔍 分析任务明确度...
📊 任务明确度评分: 8/10
⚙️ 生成执行计划...
📋 任务分析完成！
📊 任务类型: 代码开发
⚡ 复杂度: medium
🔧 执行步骤: 1个

步骤1: 生成Python贪吃蛇游戏代码
   工具: file_generation_tool
   参数: {...}

🚀 开始执行任务...
✅ 任务执行完成！生成文件: snake_game.py
```

### Web界面使用

1. 启动Web服务：选择模式2
2. 浏览器访问：`http://localhost:8080`  
3. 在聊天窗口输入需求
4. 实时查看执行过程和结果

## 🔧 核心组件

### TaskPlanner (任务规划器)
- 分析用户需求明确度
- 检测对话vs任务类型
- 生成详细执行计划
- 处理任务改进请求

### TaskExecutor (任务执行器)  
- 按计划执行各个步骤
- 提供实时状态反馈
- 处理异常和错误恢复
- 自动管理生成文件

### ToolManager (工具管理器)
- 统一管理所有外部工具
- 基于MCP协议通信
- 验证工具调用合法性
- 处理调用结果

### FileManager (文件管理器)
- 管理任务产生的文件
- 创建任务专用目录
- 提供文件下载打包
- 维护文件元数据

## 🛠️ 技术栈

### 核心框架
- **Python 3.8+**: 主要编程语言
- **OpenAI API**: 大语言模型服务
- **Pydantic**: 数据验证和序列化
- **AsyncIO**: 异步编程支持

### 通信协议
- **MCP**: Model Context Protocol，与外部工具通信
- **WebSocket**: 实时状态推送
- **HTTP/REST**: Web API接口

### 工具生态
- **FastAPI**: Web框架
- **Pandas**: 数据处理
- **Matplotlib**: 图表生成
- **Pillow**: 图像处理

## 📁 项目结构

```
05.数字员工_manus/
├── core/                     # 核心业务逻辑
│   ├── task_planner.py      # 任务规划器
│   ├── task_executor.py     # 任务执行器  
│   ├── file_manager.py      # 文件管理器
│   ├── models.py            # 数据模型
│   └── event_emitter.py     # 事件系统
├── tools/                   # 工具管理
│   ├── tool_manager.py      # 工具管理器
│   └── local_tools.py       # 本地工具
├── communication/           # 通信模块
│   ├── mcp_client.py        # MCP客户端
│   └── mcp_server.py        # MCP服务器
├── interfaces/              # 用户接口
│   ├── terminal_chat.py     # 终端界面
│   └── web/                 # Web界面
├── data/                    # 数据存储
├── tests/                   # 测试文件
├── docs/                    # 项目文档
├── main.py                  # 主启动脚本
└── requirements.txt         # 依赖文件
```

## 🔄 工作流程

1. **用户输入** → 自然语言任务描述
2. **任务分析** → 评估明确度，检测类型
3. **计划生成** → 基于可用工具生成步骤
4. **任务执行** → 按步骤调用工具完成任务
5. **结果管理** → 收集文件，生成下载包
6. **状态反馈** → 实时推送执行状态

## 🤝 参与贡献

### 开发环境搭建
1. Fork项目仓库
2. 创建功能分支
3. 参考[开发规范](05_开发规范和优化指南.md)
4. 提交Pull Request

### 代码规范
- 遵循PEP 8编码规范
- 使用Black进行代码格式化
- 编写完整的类型注解
- 添加详细的文档字符串

### 测试要求
- 单元测试覆盖率 > 80%
- 所有异步函数需要测试
- 添加集成测试用例

## 📊 性能指标

| 组件 | 平均响应时间 | 并发支持 |
|------|-------------|---------|
| 任务分析 | 2-5秒 | 10个并发 |
| 任务执行 | 10-60秒 | 5个并发 |
| 工具调用 | 1-10秒 | 20个并发 |
| 文件下载 | <1秒 | 50个并发 |

## 🔒 安全特性

- **输入验证**: 防止恶意输入和注入攻击
- **权限控制**: 基于角色的访问控制
- **敏感信息保护**: API密钥等敏感信息加密存储
- **审计日志**: 完整的操作日志记录

## 📈 路线图

### v1.1 (开发中)
- [ ] 增强Web界面交互体验
- [ ] 支持更多文件类型处理
- [ ] 优化任务执行性能

### v1.2 (规划中)  
- [ ] 支持工作流编排
- [ ] 增加任务调度功能
- [ ] 引入插件系统

### v2.0 (远期规划)
- [ ] 支持多模态输入
- [ ] 分布式部署支持
- [ ] 企业级权限管理

## 📞 支持与反馈

- **文档问题**: 查看[文档目录](#-文档导航)
- **使用问题**: 参考[部署指南](04_部署和使用指南.md)
- **开发问题**: 阅读[开发规范](05_开发规范和优化指南.md)
- **Bug报告**: 提交Issue到项目仓库

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](../LICENSE) 文件了解详情。

---

> 💡 **提示**: 这是一个快速发展的项目，建议关注项目更新并定期查看文档变更。 